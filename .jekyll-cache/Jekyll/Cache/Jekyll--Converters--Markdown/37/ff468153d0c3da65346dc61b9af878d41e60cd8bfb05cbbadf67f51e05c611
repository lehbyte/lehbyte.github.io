I"œù<h2 id="goals">Goals;</h2>
<ol>
  <li>Add some <code class="highlighter-rouge">CSS</code> using the <code class="highlighter-rouge">flask-scss</code> extension.</li>
  <li>Add <code class="highlighter-rouge">HTML</code> templates</li>
  <li>Learn how to create and connect a <code class="highlighter-rouge">database</code> to our <code class="highlighter-rouge">flask</code> application.</li>
  <li>Add <code class="highlighter-rouge">users</code>to our <code class="highlighter-rouge">database</code> and <code class="highlighter-rouge">admin</code> views to the app</li>
</ol>

<p>This is part 2 of building a restaurant app in flask. <br />
We made a basic flask app in the first part of this series. We will now focus
on organizing different parts of the app.</p>

<p>As stated before we shall begin with some backend stuff, like an <code class="highlighter-rouge">admin</code> interface and some <code class="highlighter-rouge">database</code> setups before diving into other parts of our app.</p>

<p>However, the primary goal of this second part is to <code class="highlighter-rouge">setup</code> our appâ€™s frontend. <br />
To that end we shall see how to use organize thr app to use the <code class="highlighter-rouge">flask-scss</code> extension, and how to simplify development with other tools, and so on.</p>

<h1 id="getting-started">Getting started</h1>

<p>Navigate to our project and activate our virtual environment;
<code class="highlighter-rouge">$ source ../myenv/bin/activate</code></p>

<h2 id="style-up">Style Up</h2>
<p>Before we take a look at our <code class="highlighter-rouge">__init__.py</code> file, let us first install the <code class="highlighter-rouge">flask-scss</code> extension and <code class="highlighter-rouge">flask-admin</code>;</p>

<ol>
  <li><code class="highlighter-rouge">$(myenv) pip install flask-sscss</code></li>
  <li><code class="highlighter-rouge">$(myenv) pip install flask-admin</code></li>
</ol>

<p>Now lets navigate to our app folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ __init__.pyc
â”‚Â Â  â”œâ”€â”€ static
â”‚Â Â  â”‚Â Â  â””â”€â”€ style.css
â”‚Â Â  â”œâ”€â”€ templates
â”‚Â Â  â”‚Â Â  â””â”€â”€ index.html
â”‚Â Â  â”œâ”€â”€ views.py
â”‚Â Â  â””â”€â”€ views.pyc
â””â”€â”€ run.py
</code></pre></div></div>

<p>And create two new folders;</p>

<ol>
  <li><code class="highlighter-rouge">app/assets/scss</code></li>
  <li><code class="highlighter-rouge">app/static/css</code></li>
</ol>

<p><code class="highlighter-rouge">app/assets/scss</code> will house our main <code class="highlighter-rouge">.scss</code> files where as <code class="highlighter-rouge">app/static/css</code> will contain our 
compiled css.</p>

<p>Ok so now lets setup <code class="highlighter-rouge">flask-scss</code> in our <code class="highlighter-rouge">__init__.py</code> file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_scss</span> <span class="kn">import</span> <span class="n">Scss</span>
<span class="kn">from</span> <span class="nn">flask_admin</span> <span class="kn">import</span> <span class="n">Admin</span>

<span class="n">raj</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="n">Scss</span><span class="p">(</span><span class="n">raj</span><span class="p">,</span> <span class="n">asset_dir</span><span class="o">=</span><span class="s">'app/assets/scss'</span><span class="p">,</span> <span class="n">static_dir</span><span class="o">=</span><span class="s">'app/static/css'</span><span class="p">)</span>
<span class="n">admin</span> <span class="o">=</span> <span class="n">Admin</span><span class="p">(</span><span class="n">raj</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">views</span>

</code></pre></div></div>

<p>Notice that we initialized our <code class="highlighter-rouge">Admin</code> object with our <code class="highlighter-rouge">flask</code> app. <br />
We are not done just yet. We have to call the <code class="highlighter-rouge">add_views</code> function of that <code class="highlighter-rouge">admin</code> object. 
The views function should take in an object that defines itâ€™s attributes in terms of <code class="highlighter-rouge">SQL</code> rows and columns. More on that later.</p>

<p>Now we canâ€™t add <code class="highlighter-rouge">css</code> to our site if we donâ€™t have the <code class="highlighter-rouge">html</code> so lets create an <code class="highlighter-rouge">index.html</code> file in our templates folder.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">"Raj's Restaurant"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"keywords"</span> <span class="na">content=</span><span class="s">"HTML, CSS, JavaScript"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"author"</span> <span class="na">content=</span><span class="s">"Lehbyte"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"application-name"</span> <span class="na">content=</span><span class="s">"Raj's Application"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>{{ title }}<span class="nt">&lt;/title&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"./static/css/main.css"</span> <span class="nt">/&gt;</span>	
<span class="nt">&lt;/head&gt;</span>
<span class="c">&lt;!-- body --&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;main&gt;</span>
		<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navigation"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;ul&gt;</span>					
					<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
					<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
					<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Menu<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
					<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Coupons<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
					<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Support<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;/ul&gt;</span>
			<span class="nt">&lt;/div&gt;</span>
			<span class="nt">&lt;h1&gt;</span>Welcome to Raj's Restaurant!<span class="nt">&lt;/h1&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrapper"</span> <span class="nt">&gt;</span>
				<span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"search"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"search"</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"submit"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Submit"</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;/div&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"food-grid"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"food-item"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/div&gt;</span>
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"food-item"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/div&gt;</span>
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"food-item"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/div&gt;</span>
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"food-item"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/div&gt;</span>				
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"food-item"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/div&gt;</span>	
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"food-item"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/div&gt;</span>	
			<span class="nt">&lt;/div&gt;</span>
		<span class="nt">&lt;/div&gt;</span>
	<span class="nt">&lt;/main&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="c">&lt;!--body --&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div></div>

<p>We also need to modify our <code class="highlighter-rouge">views.py</code> to render the html file above inder the default route.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">url_for</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">raj</span>

<span class="o">@</span><span class="n">raj</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
<span class="o">@</span><span class="n">raj</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/index'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
	<span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">'index.html'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Raj's Restaurant"</span><span class="p">)</span>
</code></pre></div></div>

<p>Rember that when linking <code class="highlighter-rouge">stylesheets</code> and <code class="highlighter-rouge">scripts</code>, searching begins at the root directory of the 
app, <code class="highlighter-rouge">raj</code> in our case. And we need to ensure that we are trying to access a file that actually exists;</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"./static/css/main.css"</span> <span class="nt">/&gt;</span>	

</code></pre></div></div>

<h2 id="css-sprinkles">CSS Sprinkles</h2>
<p>Lets create some <code class="highlighter-rouge">CSS</code> rules to make our app look better.
This is what our site is going to look like;
<img src="/assets/img/pexels/screenshot.png" alt="Raj" /></p>

<p>I created three <code class="highlighter-rouge">partials</code>;</p>

<ol>
  <li><code class="highlighter-rouge">_menugrid.scss</code></li>
  <li><code class="highlighter-rouge">_navigation.scss</code></li>
  <li><code class="highlighter-rouge">_variables.scss</code></li>
</ol>

<p>And a <code class="highlighter-rouge">main.scss</code> that includes all three <code class="highlighter-rouge">partials</code>. 
Itâ€™s easy to see what each <code class="highlighter-rouge">partial</code> is made for. Lets go through them one by one.</p>

<h2 id="_menugridscss"><code class="highlighter-rouge">_menugrid.scss</code></h2>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.food-grid</span><span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
    <span class="py">grid-gap</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="py">grid-template-rows</span><span class="p">:</span> <span class="m">400px</span> <span class="m">400px</span><span class="p">;</span>
    <span class="py">grid-template-columns</span><span class="p">:</span> <span class="m">33%</span> <span class="m">33%</span> <span class="m">33%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="nb">inherit</span><span class="p">;</span>    
    <span class="nl">background-color</span><span class="p">:</span> <span class="no">skyblue</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.food-item</span><span class="p">{</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>    
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">rebeccapurple</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We have opted to use a grid system to display food items. The <code class="highlighter-rouge">.food-item</code> will contain a picture as well as some description of the food an an add to tray option for the user to add the item to their tray so that they can check out it out later on.</p>

<h2 id="_navigationscss"><code class="highlighter-rouge">_navigation.scss</code></h2>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">a</span><span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="err">$</span><span class="n">link-color</span><span class="p">;</span>
    <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nd">:hover</span><span class="p">{</span>
    <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="err">$</span><span class="n">outline</span><span class="p">;</span>    
<span class="p">}</span>
<span class="nt">a</span><span class="nd">:link</span><span class="o">,</span> <span class="nt">a</span><span class="nd">:visited</span><span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="err">$</span><span class="n">link-visited</span><span class="p">;</span>    
<span class="p">}</span>
<span class="nt">a</span><span class="nd">:link:active</span><span class="o">,</span> <span class="nt">a</span><span class="nd">:visited:active</span><span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="err">$</span><span class="n">link-active</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.navigation</span><span class="p">{</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.2em</span><span class="p">;</span>
    <span class="nl">font-variant-caps</span><span class="p">:</span> <span class="n">all-petite-caps</span><span class="p">;</span>    
<span class="p">}</span>

<span class="nt">ul</span><span class="p">{</span>    
    <span class="nl">list-style-type</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">inline-flex</span><span class="p">;</span>
    
<span class="p">}</span>

<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="n">and</span> <span class="p">(</span><span class="n">max-width</span><span class="p">:</span> <span class="m">432px</span><span class="p">){</span>
    <span class="nt">ul</span><span class="p">{</span>        
        <span class="nl">list-style</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>   
        <span class="err">li{</span>
            <span class="nl">margin</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
            <span class="nl">padding</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
            <span class="nl">border</span><span class="p">:</span> <span class="m">2px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="o">&amp;</span><span class="nd">:hover</span><span class="p">{</span>
            <span class="nl">background-color</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="err">}</span>
</code></pre></div></div>

<h2 id="_variablesscss"><code class="highlighter-rouge">_variables.scss</code></h2>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span><span class="nt">link-color</span><span class="o">:</span> <span class="nt">darkgreen</span><span class="o">;</span>
<span class="err">$</span><span class="nt">link-visited</span><span class="o">:</span> <span class="nt">black</span><span class="o">;</span>
<span class="err">$</span><span class="nt">link-active</span><span class="o">:</span> <span class="nt">seagreen</span><span class="o">;</span>

<span class="err">$</span><span class="nt">bg-color</span><span class="o">:</span> <span class="nt">snow</span><span class="o">;</span>
<span class="err">$</span><span class="nt">outline</span><span class="o">:</span> <span class="nt">gray</span><span class="o">;</span>

<span class="err">$</span><span class="nt">search-height</span><span class="o">:</span> <span class="err">50</span><span class="nt">px</span><span class="o">;</span>
<span class="err">$</span><span class="nt">sradius</span><span class="o">:</span> <span class="err">25</span><span class="nt">px</span><span class="o">;</span>
</code></pre></div></div>

<h2 id="mainscss"><code class="highlighter-rouge">main.scss</code></h2>

<p>Finally, here is our <code class="highlighter-rouge">main.scss</code></p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@import</span> <span class="sx">url('https://fonts.googleapis.com/css?family=Josefin+Sans&amp;display=swap')</span><span class="p">;</span>
<span class="o">*</span><span class="p">{</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">html</span><span class="p">{</span> <span class="nl">font-family</span><span class="p">:</span> <span class="s2">'Josefin Sans'</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">html</span><span class="o">,</span> <span class="nt">body</span><span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>    
<span class="p">}</span>

<span class="k">@import</span> <span class="s2">'variables'</span><span class="p">;</span>
<span class="k">@import</span> <span class="s2">'navigation'</span><span class="p">;</span>

<span class="nt">h1</span><span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">48px</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">25px</span><span class="p">;</span>
    <span class="err">//</span> <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span><span class="p">;</span>
<span class="p">}</span>



<span class="nt">body</span><span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-direction</span><span class="p">:</span> <span class="n">column</span><span class="p">;</span>    
    <span class="err">//</span> <span class="nl">background-color</span><span class="p">:</span><span class="err">$</span><span class="n">bg-color</span><span class="p">;</span>
    <span class="err">//</span> <span class="nl">background-color</span><span class="p">:</span> <span class="no">blanchedalmond</span><span class="p">;</span>    
    <span class="nl">background</span><span class="p">:</span> <span class="n">-webkit-linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span><span class="p">,</span> <span class="no">white</span> <span class="m">20%</span><span class="p">,</span><span class="no">burlywood</span> <span class="m">80%</span><span class="p">);</span>
    <span class="nl">background</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="n">to</span> <span class="nb">bottom</span><span class="p">,</span> <span class="no">white</span> <span class="m">20%</span><span class="p">,</span> <span class="no">burlywood</span> <span class="m">80%</span><span class="p">);</span> 
    <span class="nl">background-attachment</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>

<span class="p">}</span>

<span class="nc">.wrapper</span><span class="p">{</span>    
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">darken</span><span class="p">(</span><span class="no">skyblue</span><span class="p">,</span><span class="m">10%</span><span class="p">);</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">60px</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>    
    <span class="err">//</span> <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50px</span><span class="p">;</span>    
<span class="p">}</span>
<span class="nt">input</span><span class="p">{</span>    
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">13px</span><span class="p">;</span>
    <span class="nl">vertical-align</span><span class="p">:</span> <span class="nb">middle</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span><span class="m">0px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.search</span><span class="p">{</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">30px</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">40%</span><span class="p">;</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">400px</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="err">$</span><span class="n">search-height</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="n">darken</span><span class="p">(</span><span class="no">white</span><span class="p">,</span> <span class="m">30%</span><span class="p">);</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="err">$</span><span class="n">sradius</span> <span class="m">0</span> <span class="m">0</span> <span class="err">$</span><span class="n">sradius</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.submit</span><span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span>
    <span class="nl">background-size</span><span class="p">:</span> <span class="m">34px</span> <span class="m">34px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0</span> <span class="err">$</span><span class="n">sradius</span> <span class="err">$</span><span class="n">sradius</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">0px</span> <span class="err">$</span><span class="n">sradius</span> <span class="m">0px</span> <span class="m">17px</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="err">$</span><span class="n">search-height</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">main</span><span class="p">{</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">2px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>    
<span class="p">}</span>
<span class="nc">.container</span><span class="p">{</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">2px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>    
<span class="p">}</span>

<span class="k">@import</span> <span class="s2">'menugrid'</span><span class="p">;</span>
</code></pre></div></div>

<h1 id="adding-views-to-our-admin-page">Adding views to our admin page</h1>

<p>Right now when we launch our server and navigate to <code class="highlighter-rouge">localhost:5000/admin</code> we are greeted with a nav bar with no views.</p>

<p>Lets change that. 
First we have to configure our app to work with <code class="highlighter-rouge">SQLAlchemy</code>
Lets edit our <code class="highlighter-rouge">__init__.py</code> to include <code class="highlighter-rouge">SQLAlchemy</code> by adding these two lines;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">raj</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">__init__.py</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_scss</span> <span class="kn">import</span> <span class="n">Scss</span>
<span class="kn">from</span> <span class="nn">flask_admin</span> <span class="kn">import</span> <span class="n">Admin</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="n">raj</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">raj</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">from_object</span><span class="p">(</span><span class="s">'config'</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">raj</span><span class="p">)</span>

<span class="n">Scss</span><span class="p">(</span><span class="n">raj</span><span class="p">,</span> <span class="n">asset_dir</span><span class="o">=</span><span class="s">'app/assets/scss'</span><span class="p">,</span> <span class="n">static_dir</span><span class="o">=</span><span class="s">'app/static/css'</span><span class="p">)</span>
<span class="n">admin</span> <span class="o">=</span> <span class="n">Admin</span><span class="p">(</span><span class="n">raj</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">views</span>
</code></pre></div></div>
<p>On the last line we import a file - <code class="highlighter-rouge">models</code> - which will define the records that we will eventually add to our admin views.</p>

<p>Now we have created an SQLAlchemy object called <code class="highlighter-rouge">db</code>. This is what will help us create a database that will subsequetly contain our <code class="highlighter-rouge">Users</code> and <code class="highlighter-rouge">FoodItems</code>.</p>

<p>We have also defined certain configuration variables in a <code class="highlighter-rouge">config.py</code> file for simplicity;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>

<span class="n">FLASK_ADMIN_SWATCH</span> <span class="o">=</span> <span class="s">'cerulean'</span>
<span class="n">TEMPLATES_AUTO_RELOAD</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="s">'sqlite:///'</span> <span class="o">+</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s">'raj.db'</span><span class="p">)</span>
<span class="n">SQLALCHEMY_TRACK_MODIFICATIONS</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">WTF_CSRF_ENABLED</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'myrestaurant'</span>
<span class="n">WHOOSH_BASE</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s">'raj.db'</span><span class="p">)</span>
</code></pre></div></div>

<p>There are a number of ways in which we can create our database. We can begin a python shell within our virtual environment, import all our models the the config file and call <code class="highlighter-rouge">db.create__all()</code> which would create a database called <code class="highlighter-rouge">raj.db</code>.</p>

<p>Then we can experiment with adding and remove things to that database within that shell. We have to make sure that adding and remove stuff from our database can be done without any problems.</p>

<p>But of course we canâ€™t add objects whose models donâ€™t exist so let us create some models.</p>

<h2 id="creating-models">Creating models</h2>

<p>In part 1 of this series, we modeled a food item. We defined it as an object of certain attributes, more concretely;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FoodItem</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>    
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Float</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">prep_time</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="c1">#date = 
</span>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'&lt;Food Item %r'</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">title</span>
</code></pre></div></div>
<p>But that is not enough, owners of the restaurant would want to add and remove FoodItems as well as delete users so we need to define an owner;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Owner</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'&lt;Admin %r&gt;'</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">username</span>
</code></pre></div></div>

<p>We also need to define who a user is as well. <br />
Obviously, users donâ€™t have the same privileges as <code class="highlighter-rouge">administrators</code>/<code class="highlighter-rouge">owners</code>. <br />
Userâ€™s canâ€™t create new food items, edit or delete them. <br />
They only controll the checkout cart.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'&lt;Admin %r&gt;'</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">username</span>
</code></pre></div></div>
<p>We can also create views to control certain aspects of our <code class="highlighter-rouge">User</code> and <code class="highlighter-rouge">Owner</code> objects;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">can_create</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">can_edit</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">can_delete</span> <span class="o">=</span> <span class="bp">False</span>
</code></pre></div></div>

<p>And finally, we can add views to our <code class="highlighter-rouge">admin</code> page;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">admin</span><span class="p">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">UserView</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">))</span>
<span class="n">admin</span><span class="p">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ModelView</span><span class="p">(</span><span class="n">FoodItem</span><span class="p">,</span> <span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">))</span>
</code></pre></div></div>

<p>The full code listing for <code class="highlighter-rouge">models.py</code>;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask_admin.contrib.sqla</span> <span class="kn">import</span> <span class="n">ModelView</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">admin</span><span class="p">,</span> <span class="n">db</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'&lt;User %r&gt;'</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">username</span>

<span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">User</span><span class="p">):</span>        
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'&lt;Admin %r&gt;'</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">username</span>

<span class="k">class</span> <span class="nc">FoodItem</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>    
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Float</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">prep_time</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="c1">#date = 
</span>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'&lt;FoodItem %r'</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">title</span>

<span class="k">class</span> <span class="nc">UserView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">can_create</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">can_edit</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">can_delete</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c1"># Add views 
</span><span class="n">admin</span><span class="p">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">UserView</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">))</span>
<span class="n">admin</span><span class="p">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ModelView</span><span class="p">(</span><span class="n">FoodItem</span><span class="p">,</span> <span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">))</span>
</code></pre></div></div>

<p>Obviously our <code class="highlighter-rouge">models.py</code> will reside in our <code class="highlighter-rouge">app</code> folder, where our <code class="highlighter-rouge">views.py</code> is.</p>

<h2 id="creating-our-database">Creating our database.</h2>
<h3 id="postgresql">Postgresql</h3>
<p>If you have <code class="highlighter-rouge">postgresql</code> installed, you can create a database like so;</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-i</span>
<span class="nv">$ </span>su - postrges
<span class="nv">$ </span>createdb mydb
</code></pre></div></div>
<p>Then you can;</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>psql username or pqsl postgres
<span class="se">\l</span>
</code></pre></div></div>
<p>To see if your database was created and who owns it. <br />
I created a <code class="highlighter-rouge">raj_db</code> database and changed itâ€™s ownership to <code class="highlighter-rouge">lehbyte</code> - me. <br />
 You can change ownership of any databse to any <code class="highlighter-rouge">linux</code> user registered on your machine.</p>

<p>We need to create a <code class="highlighter-rouge">database engine</code> for SQLAlchemy;</p>

<blockquote>
  <p>The Engine is the starting point for any <code class="highlighter-rouge">SQLAlchemy</code> application. Itâ€™s â€œhome baseâ€ for the actual database and its <code class="highlighter-rouge">DBAPI</code>, delivered to the SQLAlchemy application through a connection pool and a Dialect, which describes how to talk to a specific kind of database/<code class="highlighter-rouge">DBAPI</code> combination.</p>
</blockquote>

<p>So how do we create this engine;</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">'postgresql://scott:tiger@localhost:5432/mydatabase'</span><span class="p">)</span>
</code></pre></div></div>

<p>Here <code class="highlighter-rouge">scott</code> is the username, <code class="highlighter-rouge">tiger</code> is the password and <code class="highlighter-rouge">5432</code> refers to port on which to connect to <code class="highlighter-rouge">mydatabase</code>. But of course we have to change this <code class="highlighter-rouge">URI</code> to match our configuration. 
Let us build our <code class="highlighter-rouge">URI</code> or <code class="highlighter-rouge">SQLALCHEMY_DATABASE_URI</code>.</p>

<p>We have;</p>

<table>
  <thead>
    <tr>
      <th>Keys</th>
      <th>Values</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>lehbyte</td>
    </tr>
    <tr>
      <td>password</td>
      <td>mypassword</td>
    </tr>
    <tr>
      <td>database</td>
      <td>raj_db</td>
    </tr>
  </tbody>
</table>

<p>Thus;</p>

<p><code class="highlighter-rouge">SQLALCHEMY_DATABASE_URI='postgresql://lehbyte:mypassword@localhost:5432/raj_db'</code></p>

<p>Now we can begin a <code class="highlighter-rouge">python</code> shelll;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">db</span><span class="p">,</span> <span class="n">models</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">config</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="p">.</span><span class="n">create_all</span><span class="p">()</span>
</code></pre></div></div>

<p>If you donâ€™t get any errors then it means the command <code class="highlighter-rouge">db.create_all()</code> was successfull.</p>

<p>If you get any authentication issues, make sure that the password you are using is the actually password associated with your <code class="highlighter-rouge">linux</code> account. If you get any connection issues try a different port then close the python session and begin a new one with those changes.</p>

<h4 id="adding-data-to-our-database">Adding data to our database</h4>
<p>Rember that we imported <code class="highlighter-rouge">models</code> into our python session so we can create 
<code class="highlighter-rouge">users</code> and <code class="highlighter-rouge">food items</code> and add them to our <code class="highlighter-rouge">raj_db</code> database.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">app.models</span> <span class="kn">import</span> <span class="n">User</span><span class="p">,</span> <span class="n">FoodItem</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kate</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">'Kate'</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s">'kate@email.com'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">guest</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">'Guest'</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s">'guest@email.com'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kate</span><span class="p">,</span> <span class="n">guest</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">User</span> <span class="s">'Kate'</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">User</span> <span class="s">'Guest'</span><span class="o">&gt;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">kate</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">User</span><span class="p">.</span><span class="n">query</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">User</span> <span class="s">'Kate'</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">User</span> <span class="s">'Guest'</span><span class="o">&gt;</span><span class="p">]</span>
</code></pre></div></div>

<p>Now you are good to go.</p>

<h3 id="sqlite">SQLite</h3>

<p>In SQLite creating a database is easy. <br />
All we have to do is modify our <code class="highlighter-rouge">config.py</code>
thus;
<code class="highlighter-rouge">SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(basedir, 'raj.db')</code></p>

<p>Start a <code class="highlighter-rouge">python</code> shell, import the <code class="highlighter-rouge">db</code> and all the other things as before and just
run <code class="highlighter-rouge">db.create.all()</code></p>

<p>Alternatively we could just create a <code class="highlighter-rouge">create_db.py</code> to handle most of this for us;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create database
</span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">basedir</span>
<span class="kn">from</span> <span class="nn">sqlaclchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">'postgresql://username:mypassword@localhost:5432/mydb'</span><span class="p">)</span>
<span class="c1">#engine = create_engine('sqlite:///' + os.path.join(basedir, 'raj.db'))
</span><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">db</span>
<span class="n">db</span><span class="p">.</span><span class="n">create_all</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="security">Security</h2>
<p>You may be worried about how we connect to our <code class="highlighter-rouge">postgresql</code> database and whether thereâ€™s a secure way to do so without exposing our password.</p>

<p>You can use an <code class="highlighter-rouge">.env</code> file and include it in <code class="highlighter-rouge">.gitignore</code> <br />
Put your password in this <code class="highlighter-rouge">.env</code> file;</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MY_PASSWORD</span><span class="o">=</span><span class="s">'mypassword'</span>
</code></pre></div></div>

<p>Then modify your <code class="highlighter-rouge">SQLALCHEMY_DATABASE_URI</code> thus;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pydotenv</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">pydotenv</span><span class="p">.</span><span class="n">Environment</span><span class="p">()</span>
<span class="n">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="s">'postgresql://username:'</span><span class="o">+</span><span class="n">env</span><span class="p">[</span><span class="s">'DB_PASSWORD'</span><span class="p">]</span><span class="o">+</span><span class="s">'@localhost:5432/mydatabase'</span>
</code></pre></div></div>

<p>This would be useful if your repo is publicly available.</p>

<h1 id="concluding-part-2">Concluding part 2</h1>

<p>One last thing we need to make sure is that we have <code class="highlighter-rouge">flask-scss</code> installed. 
If it is not, then our <code class="highlighter-rouge">scss</code> wonâ€™t be compiled into <code class="highlighter-rouge">css</code>.</p>

<p>One pain-point with <code class="highlighter-rouge">py-scss</code> is that you have to manually reload the page yourself. This is unacceptable especially given the fact that we will be heavily editing and and testing the <code class="highlighter-rouge">frontend</code> extensively.</p>

<p>Now you can try to set <code class="highlighter-rouge">TEMPLATES_AUTO_RELOAD</code> to <code class="highlighter-rouge">True</code> in your <code class="highlighter-rouge">config.py</code> but this will only work for <code class="highlighter-rouge">html templates</code> and not <code class="highlighter-rouge">stylesheets</code>.</p>

<p>Another alternative is to create a <code class="highlighter-rouge">gulpfile.js</code> in your <code class="highlighter-rouge">static</code> folder and have it execute your <code class="highlighter-rouge">run.py</code> script in a <code class="highlighter-rouge">child_process</code> but with <code class="highlighter-rouge">browserfy</code> enabled. This a tricky thing to do since our <code class="highlighter-rouge">python</code> server has to be up for us to use <code class="highlighter-rouge">flask-scss</code>. Going full <code class="highlighter-rouge">nodejs</code> will only make things worse, unless of course we want to switch the enrire framework to <code class="highlighter-rouge">nodejs</code></p>

<p>Alternatively, we can try to investigate how to work with <code class="highlighter-rouge">honcho</code> on this end.</p>

<p>In the third part of this tutorial we shall touch on the following points;</p>
<ol>
  <li>User management</li>
  <li>Better frontend</li>
  <li>Restricting access to owners</li>
  <li>Creating a checkout process</li>
  <li>Experimenting with a <code class="highlighter-rouge">nodejs</code> solution to <code class="highlighter-rouge">browsersync</code></li>
</ol>

<p>Until then, happy coding.</p>
:ET